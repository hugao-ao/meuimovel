<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Financiamento Imobiliário</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="container-fluid">
        <!-- Cabeçalho -->
        <header class="bg-primary text-white py-3 mb-4 rounded-bottom">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-md-8">
                        <h1 class="mb-0">Calculadora de Financiamento Imobiliário</h1>
                        <p class="mb-0">Simule, compare e analise diferentes cenários de financiamento</p>
                    </div>
                    <div class="col-md-4 text-md-end mt-3 mt-md-0">
                        <button id="btnTemaEscuro" class="btn btn-outline-light btn-sm">
                            <i class="fas fa-moon"></i> Modo Escuro
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <div class="container">
            <div class="row">
                <!-- Formulário Principal -->
                <div class="col-lg-12 mb-4">
                    <div class="card shadow">
                        <div class="card-header bg-light">
                            <ul class="nav nav-tabs card-header-tabs" id="formTabs" role="tablist">
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link active" id="imovel-tab" data-bs-toggle="tab" data-bs-target="#imovel" type="button" role="tab" aria-controls="imovel" aria-selected="true">Imóvel</button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="financiamento-tab" data-bs-toggle="tab" data-bs-target="#financiamento" type="button" role="tab" aria-controls="financiamento" aria-selected="false">Financiamento</button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="comprador-tab" data-bs-toggle="tab" data-bs-target="#comprador" type="button" role="tab" aria-controls="comprador" aria-selected="false">Comprador</button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="custos-tab" data-bs-toggle="tab" data-bs-target="#custos" type="button" role="tab" aria-controls="custos" aria-selected="false">Custos Adicionais</button>
                                </li>
                            </ul>
                        </div>
                        <div class="card-body">
                            <form id="formFinanciamento">
                                <div class="tab-content" id="formTabsContent">
                                    <!-- Aba Imóvel -->
                                    <div class="tab-pane fade show active" id="imovel" role="tabpanel" aria-labelledby="imovel-tab">
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <label for="valorImovel" class="form-label">Valor do Imóvel (R$)</label>
                                                <div class="input-group">
                                                    <span class="input-group-text">R$</span>
                                                    <input type="number" class="form-control" id="valorImovel" min="0" step="1000" required>
                                                </div>
                                                <div class="form-text">Valor total do imóvel a ser financiado</div>
                                            </div>
                                            <div class="col-md-6">
                                                <label for="valorEntrada" class="form-label">Valor de Entrada (R$)</label>
                                                <div class="input-group">
                                                    <span class="input-group-text">R$</span>
                                                    <input type="number" class="form-control" id="valorEntrada" min="0" step="1000">
                                                </div>
                                                <div class="form-text">Valor que será pago como entrada</div>
                                            </div>
                                        </div>
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <label for="estadoImovel" class="form-label">Estado do Imóvel</label>
                                                <select class="form-select" id="estadoImovel" required>
                                                    <option value="novo">Novo</option>
                                                    <option value="usado">Usado</option>
                                                    <option value="construcao">Em Construção</option>
                                                </select>
                                                <div class="form-text">Condição atual do imóvel</div>
                                            </div>
                                            <div class="col-md-6">
                                                <label for="localizacao" class="form-label">UF</label>
                                                <select class="form-select" id="localizacao" required>
                                                    <option value="AC">Acre</option>
                                                    <option value="AL">Alagoas</option>
                                                    <option value="AP">Amapá</option>
                                                    <option value="AM">Amazonas</option>
                                                    <option value="BA">Bahia</option>
                                                    <option value="CE">Ceará</option>
                                                    <option value="DF">Distrito Federal</option>
                                                    <option value="ES">Espírito Santo</option>
                                                    <option value="GO">Goiás</option>
                                                    <option value="MA">Maranhão</option>
                                                    <option value="MT">Mato Grosso</option>
                                                    <option value="MS">Mato Grosso do Sul</option>
                                                    <option value="MG">Minas Gerais</option>
                                                    <option value="PA">Pará</option>
                                                    <option value="PB">Paraíba</option>
                                                    <option value="PR">Paraná</option>
                                                    <option value="PE">Pernambuco</option>
                                                    <option value="PI">Piauí</option>
                                                    <option value="RJ">Rio de Janeiro</option>
                                                    <option value="RN">Rio Grande do Norte</option>
                                                    <option value="RS">Rio Grande do Sul</option>
                                                    <option value="RO">Rondônia</option>
                                                    <option value="RR">Roraima</option>
                                                    <option value="SC">Santa Catarina</option>
                                                    <option value="SP" selected>São Paulo</option>
                                                    <option value="SE">Sergipe</option>
                                                    <option value="TO">Tocantins</option>
                                                </select>
                                                <div class="form-text">Estado onde está localizado o imóvel</div>
                                            </div>
                                        </div>
                                        <div class="d-flex justify-content-between">
                                            <div></div>
                                            <button type="button" class="btn btn-primary" id="btnProximoFinanciamento">Próximo <i class="fas fa-arrow-right"></i></button>
                                        </div>
                                    </div>

                                    <!-- Aba Financiamento -->
                                    <div class="tab-pane fade" id="financiamento" role="tabpanel" aria-labelledby="financiamento-tab">
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <label for="sistemaAmortizacao" class="form-label">Sistema de Amortização</label>
                                                <select class="form-select" id="sistemaAmortizacao" required>
                                                    <option value="sac">SAC - Sistema de Amortização Constante</option>
                                                    <option value="price">Tabela Price (Sistema Francês)</option>
                                                    <option value="sacre">SACRE - Sistema de Amortização Crescente</option>
                                                </select>
                                                <div class="form-text">
                                                    <a href="#" data-bs-toggle="modal" data-bs-target="#modalSistemasAmortizacao">Saiba mais sobre os sistemas</a>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <label for="sistemaCorrecao" class="form-label">Sistema de Correção Monetária</label>
                                                <select class="form-select" id="sistemaCorrecao" required>
                                                    <option value="tr">TR</option>
                                                    <option value="ipca">IPCA</option>
                                                    <option value="fixo" selected>Taxa Fixa</option>
                                                    <option value="poupanca">Poupança</option>
                                                </select>
                                                <div class="form-text">Índice utilizado para correção do saldo devedor</div>
                                            </div>
                                        </div>
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <label for="taxaJuros" class="form-label">Taxa de Juros Nominal (% ao ano)</label>
                                                <div class="input-group">
                                                    <input type="number" step="0.01" class="form-control" id="taxaJuros" min="0" max="30" value="11.29" required>
                                                    <span class="input-group-text">% a.a.</span>
                                                </div>
                                                <div class="form-text">Taxa de juros nominal anual</div>
                                            </div>
                                            <div class="col-md-6">
                                                <label for="prazoFinanciamento" class="form-label">Prazo (meses)</label>
                                                <div class="input-group">
                                                    <input type="number" class="form-control" id="prazoFinanciamento" min="12" max="420" value="360" required>
                                                    <span class="input-group-text">meses</span>
                                                </div>
                                                <div class="form-text">Prazo total do financiamento (até 420 meses/35 anos)</div>
                                            </div>
                                        </div>
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <label for="dataInicio" class="form-label">Data de Início</label>
                                                <input type="date" class="form-control" id="dataInicio" required>
                                                <div class="form-text">Data de início do financiamento</div>
                                            </div>
                                        </div>
                                        <div class="d-flex justify-content-between">
                                            <button type="button" class="btn btn-secondary" id="btnVoltarImovel"><i class="fas fa-arrow-left"></i> Anterior</button>
                                            <button type="button" class="btn btn-primary" id="btnProximoComprador">Próximo <i class="fas fa-arrow-right"></i></button>
                                        </div>
                                    </div>

                                    <!-- Aba Comprador -->
                                    <div class="tab-pane fade" id="comprador" role="tabpanel" aria-labelledby="comprador-tab">
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <label for="rendaFamiliar" class="form-label">Renda Familiar Mensal (R$)</label>
                                                <div class="input-group">
                                                    <span class="input-group-text">R$</span>
                                                    <input type="number" class="form-control" id="rendaFamiliar" min="0" step="100" required>
                                                </div>
                                                <div class="form-text">Soma da renda de todos os compradores</div>
                                            </div>
                                            <div class="col-md-6">
                                                <label for="idadeComprador" class="form-label">Idade do Principal Comprador</label>
                                                <div class="input-group">
                                                    <input type="number" class="form-control" id="idadeComprador" min="18" max="80" value="35">
                                                    <span class="input-group-text">anos</span>
                                                </div>
                                                <div class="form-text">Idade do comprador principal</div>
                                            </div>
                                        </div>
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <label for="usarFgts" class="form-label">Usar FGTS?</label>
                                                <select class="form-select" id="usarFgts">
                                                    <option value="nao" selected>Não</option>
                                                    <option value="sim">Sim</option>
                                                </select>
                                                <div class="form-text">Utilização do FGTS no financiamento</div>
                                            </div>
                                            <div class="col-md-6" id="fgtsOptions" style="display:none;">
                                                <label for="valorFgts" class="form-label">Valor disponível no FGTS (R$)</label>
                                                <div class="input-group">
                                                    <span class="input-group-text">R$</span>
                                                    <input type="number" class="form-control" id="valorFgts" min="0" step="100">
                                                </div>
                                                <div class="form-text">Valor disponível para uso no financiamento</div>
                                            </div>
                                        </div>
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <label for="programaGoverno" class="form-label">Programa Governamental</label>
                                                <select class="form-select" id="programaGoverno">
                                                    <option value="nenhum" selected>Nenhum</option>
                                                    <option value="mcmv1">Minha Casa Minha Vida - Faixa 1</option>
                                                    <option value="mcmv2">Minha Casa Minha Vida - Faixa 2</option>
                                                    <option value="mcmv3">Minha Casa Minha Vida - Faixa 3</option>
                                                    <option value="mcmv4">Minha Casa Minha Vida - Faixa 4</option>
                                                </select>
                                                <div class="form-text">Programa governamental aplicável</div>
                                            </div>
                                        </div>
                                        <div class="d-flex justify-content-between">
                                            <button type="button" class="btn btn-secondary" id="btnVoltarFinanciamento"><i class="fas fa-arrow-left"></i> Anterior</button>
                                            <button type="button" class="btn btn-primary" id="btnProximoCustos">Próximo <i class="fas fa-arrow-right"></i></button>
                                        </div>
                                    </div>

                                    <!-- Aba Custos Adicionais -->
                                    <div class="tab-pane fade" id="custos" role="tabpanel" aria-labelledby="custos-tab">
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <label for="taxaMIP" class="form-label">Taxa MIP (% ao ano)</label>
                                                <div class="input-group">
                                                    <input type="number" step="0.01" class="form-control" id="taxaMIP" min="0" value="0.44">
                                                    <span class="input-group-text">% a.a.</span>
                                                </div>
                                                <div class="form-text">Taxa do seguro Morte e Invalidez Permanente</div>
                                            </div>
                                            <div class="col-md-6">
                                                <label for="taxaDFI" class="form-label">Taxa DFI (% ao ano)</label>
                                                <div class="input-group">
                                                    <input type="number" step="0.01" class="form-control" id="taxaDFI" min="0" value="0.17">
                                                    <span class="input-group-text">% a.a.</span>
                                                </div>
                                                <div class="form-text">Taxa do seguro Danos Físicos ao Imóvel</div>
                                            </div>
                                        </div>
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <label for="tarifaAvaliacao" class="form-label">Tarifa de Avaliação (R$)</label>
                                                <div class="input-group">
                                                    <span class="input-group-text">R$</span>
                                                    <input type="number" class="form-control" id="tarifaAvaliacao" min="0" value="2500">
                                                </div>
                                                <div class="form-text">Custo da avaliação do imóvel</div>
                                            </div>
                                            <div class="col-md-6">
                                                <label for="custosCartorarios" class="form-label">Custos Cartorários Estimados (R$)</label>
                                                <div class="input-group">
                                                    <span class="input-group-text">R$</span>
                                                    <input type="number" class="form-control" id="custosCartorarios" min="0" value="3000">
                                                </div>
                                                <div class="form-text">Custos de registro e documentação</div>
                                            </div>
                                        </div>
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <label for="outrosCustos" class="form-label">Outros Custos (R$)</label>
                                                <div class="input-group">
                                                    <span class="input-group-text">R$</span>
                                                    <input type="number" class="form-control" id="outrosCustos" min="0" value="0">
                                                </div>
                                                <div class="form-text">Outros custos adicionais</div>
                                            </div>
                                        </div>
                                        <div class="d-flex justify-content-between">
                                            <button type="button" class="btn btn-secondary" id="btnVoltarComprador"><i class="fas fa-arrow-left"></i> Anterior</button>
                                            <button type="button" class="btn btn-success" id="btnCalcular">Calcular Financiamento <i class="fas fa-calculator"></i></button>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Resultados -->
                <div class="col-lg-12 mb-4" id="secaoResultados" style="display: none;">
                    <div class="card shadow">
                        <div class="card-header bg-success text-white">
                            <h5 class="mb-0">Resumo do Financiamento</h5>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <p><strong>Valor Financiado:</strong> <span id="resultadoValorFinanciado">R$ 0,00</span></p>
                                    <p><strong>Primeira Prestação:</strong> <span id="resultadoPrimeiraPrestacao">R$ 0,00</span></p>
                                    <p><strong>Total de Juros:</strong> <span id="resultadoTotalJuros">R$ 0,00</span></p>
                                    <p><strong>Total de Seguros:</strong> <span id="resultadoTotalSeguros">R$ 0,00</span></p>
                                </div>
                                <div class="col-md-6">
                                    <p><strong>Custo Efetivo Total (CET):</strong> <span id="resultadoCET">0,00%</span></p>
                                    <p><strong>Comprometimento de Renda:</strong> <span id="resultadoComprometimento">0,00%</span></p>
                                    <p><strong>Valor Final Pago:</strong> <span id="resultadoValorFinal">R$ 0,00</span></p>
                                    <p><strong>Prazo Total:</strong> <span id="resultadoPrazoTotal">0 meses</span></p>
                                </div>
                            </div>
                            <div class="row mt-3">
                                <div class="col-12">
                                    <div class="d-flex justify-content-between">
                                        <button class="btn btn-primary" id="btnSalvarCenario">
                                            <i class="fas fa-save"></i> Salvar Cenário
                                        </button>
                                        <button class="btn btn-secondary" id="btnExportarPDF">
                                            <i class="fas fa-file-pdf"></i> Exportar PDF
                                        </button>
                                        <button class="btn btn-info" id="btnNovoCalculo">
                                            <i class="fas fa-sync"></i> Novo Cálculo
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Abas de Resultados Detalhados -->
                <div class="col-lg-12 mb-4" id="secaoDetalhes" style="display: none;">
                    <div class="card shadow">
                        <div class="card-header bg-light">
                            <ul class="nav nav-tabs card-header-tabs" id="resultadosTabs" role="tablist">
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link active" id="tabela-tab" data-bs-toggle="tab" data-bs-target="#tabela" type="button" role="tab" aria-controls="tabela" aria-selected="true">Memória de Cálculo</button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="graficos-tab" data-bs-toggle="tab" data-bs-target="#graficos" type="button" role="tab" aria-controls="graficos" aria-selected="false">Gráficos</button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="cenarios-tab" data-bs-toggle="tab" data-bs-target="#cenarios" type="button" role="tab" aria-controls="cenarios" aria-selected="false">Cenários Salvos</button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="analise-tab" data-bs-toggle="tab" data-bs-target="#analise" type="button" role="tab" aria-controls="analise" aria-selected="false">Análise</button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="ferramentas-tab" data-bs-toggle="tab" data-bs-target="#ferramentas" type="button" role="tab" aria-controls="ferramentas" aria-selected="false">Ferramentas</button>
                                </li>
                            </ul>
                        </div>
                        <div class="card-body">
                            <div class="tab-content" id="resultadosTabsContent">
                                <!-- Aba Memória de Cálculo -->
                                <div class="tab-pane fade show active" id="tabela" role="tabpanel" aria-labelledby="tabela-tab">
                                    <div class="table-responsive">
                                        <table class="table table-striped table-sm" id="tabelaMemoriaCalculo">
                                            <thead>
                                                <tr>
                                                    <th>Parcela</th>
                                                    <th>Data</th>
                                                    <th>Prestação (R$)</th>
                                                    <th>Amortização (R$)</th>
                                                    <th>Juros (R$)</th>
                                                    <th>MIP (R$)</th>
                                                    <th>DFI (R$)</th>
                                                    <th>Correção (R$)</th>
                                                    <th>Saldo Devedor (R$)</th>
                                                </tr>
                                            </thead>
                                            <tbody id="tabelaMemoriaCalculoBody">
                                                <!-- Preenchido via JavaScript -->
                                            </tbody>
                                        </table>
                                    </div>
                                    <nav>
                                        <ul class="pagination justify-content-center" id="paginacaoTabela">
                                            <!-- Paginação gerada via JavaScript -->
                                        </ul>
                                    </nav>
                                    <div class="d-flex justify-content-end mt-3">
                                        <button class="btn btn-secondary" id="btnExportarCSV">
                                            <i class="fas fa-file-csv"></i> Exportar CSV
                                        </button>
                                    </div>
                                </div>

                                <!-- Aba Gráficos -->
                                <div class="tab-pane fade" id="graficos" role="tabpanel" aria-labelledby="graficos-tab">
                                    <div class="row">
                                        <div class="col-md-12 mb-4">
                                            <div class="card">
                                                <div class="card-header">Evolução do Saldo Devedor</div>
                                                <div class="card-body">
                                                    <canvas id="graficoSaldoDevedor" height="300"></canvas>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6 mb-4">
                                            <div class="card">
                                                <div class="card-header">Composição das Parcelas</div>
                                                <div class="card-body">
                                                    <canvas id="graficoComposicaoParcelas" height="300"></canvas>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6 mb-4">
                                            <div class="card">
                                                <div class="card-header">Distribuição de Pagamentos</div>
                                                <div class="card-body">
                                                    <canvas id="graficoDistribuicao" height="300"></canvas>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Aba Cenários Salvos -->
                                <div class="tab-pane fade" id="cenarios" role="tabpanel" aria-labelledby="cenarios-tab">
                                    <div class="table-responsive">
                                        <table class="table table-hover" id="tabelaCenarios">
                                            <thead>
                                                <tr>
                                                    <th>Nome</th>
                                                    <th>Valor Financiado</th>
                                                    <th>Sistema</th>
                                                    <th>Prazo</th>
                                                    <th>Taxa</th>
                                                    <th>Primeira Parcela</th>
                                                    <th>Valor Final</th>
                                                    <th>Ações</th>
                                                </tr>
                                            </thead>
                                            <tbody id="tabelaCenariosBody">
                                                <!-- Preenchido via JavaScript -->
                                            </tbody>
                                        </table>
                                    </div>
                                    <div class="mt-3 d-flex justify-content-between">
                                        <div>
                                            <button class="btn btn-secondary" id="btnExportarCenarios">
                                                <i class="fas fa-file-export"></i> Exportar Cenários
                                            </button>
                                            <button class="btn btn-secondary" id="btnImportarCenarios">
                                                <i class="fas fa-file-import"></i> Importar Cenários
                                            </button>
                                            <input type="file" id="importarCenariosFile" style="display:none">
                                        </div>
                                        <div>
                                            <button class="btn btn-danger" id="btnLimparCenarios">
                                                <i class="fas fa-trash"></i> Limpar Todos
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <!-- Aba Análise -->
                                <div class="tab-pane fade" id="analise" role="tabpanel" aria-labelledby="analise-tab">
                                    <div class="row">
                                        <div class="col-md-12 mb-4">
                                            <div class="card">
                                                <div class="card-header">Análise do Último Cenário</div>
                                                <div class="card-body" id="analiseUltimoCenarioConteudo">
                                                    <!-- Preenchido via JavaScript -->
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-12 mb-4">
                                            <div class="card">
                                                <div class="card-header">Comparação entre Cenários</div>
                                                <div class="card-body">
                                                    <div class="form-group">
                                                        <label>Selecione os cenários para comparar:</label>
                                                        <div id="checkboxesCenarios" class="mb-3">
                                                            <!-- Checkboxes gerados via JavaScript -->
                                                        </div>
                                                        <button class="btn btn-primary mt-2" id="btnCompararCenarios">Comparar Selecionados</button>
                                                    </div>
                                                    <div id="resultadoComparacao" class="mt-3">
                                                        <!-- Preenchido via JavaScript -->
                                                    </div>
                                                    <div class="mt-3">
                                                        <canvas id="graficoComparacaoCenarios" height="300"></canvas>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Aba Ferramentas -->
                                <div class="tab-pane fade" id="ferramentas" role="tabpanel" aria-labelledby="ferramentas-tab">
                                    <ul class="nav nav-pills mb-3" id="ferramentasSubTabs" role="tablist">
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link active" id="amortizacao-tab" data-bs-toggle="pill" data-bs-target="#amortizacaoExtra" type="button" role="tab" aria-controls="amortizacaoExtra" aria-selected="true">Amortizações Extraordinárias</button>
                                        </li>
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link" id="portabilidade-tab" data-bs-toggle="pill" data-bs-target="#portabilidade" type="button" role="tab" aria-controls="portabilidade" aria-selected="false">Portabilidade</button>
                                        </li>
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link" id="capacidade-tab" data-bs-toggle="pill" data-bs-target="#capacidade" type="button" role="tab" aria-controls="capacidade" aria-selected="false">Capacidade de Pagamento</button>
                                        </li>
                                    </ul>
                                    <div class="tab-content" id="ferramentasTabContent">
                                        <!-- Amortizações Extraordinárias -->
                                        <div class="tab-pane fade show active" id="amortizacaoExtra" role="tabpanel" aria-labelledby="amortizacao-tab">
                                            <div class="card">
                                                <div class="card-body">
                                                    <h5 class="card-title">Simular Amortização Extraordinária</h5>
                                                    <div class="row mb-3">
                                                        <div class="col-md-4">
                                                            <label for="valorAmortizacao" class="form-label">Valor da Amortização (R$)</label>
                                                            <div class="input-group">
                                                                <span class="input-group-text">R$</span>
                                                                <input type="number" class="form-control" id="valorAmortizacao" min="0">
                                                            </div>
                                                        </div>
                                                        <div class="col-md-4">
                                                            <label for="parcelaAmortizacao" class="form-label">Após a Parcela</label>
                                                            <input type="number" class="form-control" id="parcelaAmortizacao" min="1" max="420" value="12">
                                                        </div>
                                                        <div class="col-md-4">
                                                            <label for="tipoImpacto" class="form-label">Impacto Desejado</label>
                                                            <select class="form-select" id="tipoImpacto">
                                                                <option value="prazo">Reduzir Prazo</option>
                                                                <option value="parcela">Reduzir Parcela</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <button class="btn btn-primary" id="btnSimularAmortizacao">Simular Amortização</button>
                                                    <div id="resultadoAmortizacao" class="mt-3">
                                                        <!-- Preenchido via JavaScript -->
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- Portabilidade -->
                                        <div class="tab-pane fade" id="portabilidade" role="tabpanel" aria-labelledby="portabilidade-tab">
                                            <div class="card">
                                                <div class="card-body">
                                                    <h5 class="card-title">Simular Portabilidade</h5>
                                                    <div class="row mb-3">
                                                        <div class="col-md-4">
                                                            <label for="novaTaxaJuros" class="form-label">Nova Taxa de Juros (% ao ano)</label>
                                                            <div class="input-group">
                                                                <input type="number" step="0.01" class="form-control" id="novaTaxaJuros" min="0" max="30">
                                                                <span class="input-group-text">% a.a.</span>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-4">
                                                            <label for="custoPortabilidade" class="form-label">Custo da Portabilidade (R$)</label>
                                                            <div class="input-group">
                                                                <span class="input-group-text">R$</span>
                                                                <input type="number" class="form-control" id="custoPortabilidade" min="0" value="2500">
                                                            </div>
                                                        </div>
                                                        <div class="col-md-4">
                                                            <label for="parcelaAtual" class="form-label">Parcela Atual</label>
                                                            <input type="number" class="form-control" id="parcelaAtual" min="1" max="420" value="24">
                                                        </div>
                                                    </div>
                                                    <button class="btn btn-primary" id="btnSimularPortabilidade">Simular Portabilidade</button>
                                                    <div id="resultadoPortabilidade" class="mt-3">
                                                        <!-- Preenchido via JavaScript -->
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- Capacidade de Pagamento -->
                                        <div class="tab-pane fade" id="capacidade" role="tabpanel" aria-labelledby="capacidade-tab">
                                            <div class="card">
                                                <div class="card-body">
                                                    <h5 class="card-title">Calcular Capacidade de Pagamento</h5>
                                                    <div class="row mb-3">
                                                        <div class="col-md-4">
                                                            <label for="rendaFamiliarCapacidade" class="form-label">Renda Familiar Mensal (R$)</label>
                                                            <div class="input-group">
                                                                <span class="input-group-text">R$</span>
                                                                <input type="number" class="form-control" id="rendaFamiliarCapacidade" min="0">
                                                            </div>
                                                        </div>
                                                        <div class="col-md-4">
                                                            <label for="outrasObrigacoes" class="form-label">Outras Obrigações Mensais (R$)</label>
                                                            <div class="input-group">
                                                                <span class="input-group-text">R$</span>
                                                                <input type="number" class="form-control" id="outrasObrigacoes" min="0" value="0">
                                                            </div>
                                                        </div>
                                                        <div class="col-md-4">
                                                            <label for="prazoDesejado" class="form-label">Prazo Desejado (meses)</label>
                                                            <div class="input-group">
                                                                <input type="number" class="form-control" id="prazoDesejado" min="12" max="420" value="360">
                                                                <span class="input-group-text">meses</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <button class="btn btn-primary" id="btnCalcularCapacidade">Calcular Capacidade</button>
                                                    <div id="resultadoCapacidade" class="mt-3">
                                                        <!-- Preenchido via JavaScript -->
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal Salvar Cenário -->
        <div class="modal fade" id="modalSalvarCenario" tabindex="-1" aria-labelledby="modalSalvarCenarioLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="modalSalvarCenarioLabel">Salvar Cenário</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fechar"></button>
                    </div>
                    <div class="modal-body">
                        <div class="mb-3">
                            <label for="nomeCenario" class="form-label">Nome do Cenário</label>
                            <input type="text" class="form-control" id="nomeCenario" placeholder="Ex: Apartamento 2 quartos - SAC">
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                        <button type="button" class="btn btn-primary" id="btnConfirmarSalvarCenario">Salvar</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal Sistemas de Amortização -->
        <div class="modal fade" id="modalSistemasAmortizacao" tabindex="-1" aria-labelledby="modalSistemasAmortizacaoLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="modalSistemasAmortizacaoLabel">Sistemas de Amortização</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fechar"></button>
                    </div>
                    <div class="modal-body">
                        <div class="accordion" id="accordionSistemas">
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="headingSAC">
                                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSAC" aria-expanded="true" aria-controls="collapseSAC">
                                        Sistema de Amortização Constante (SAC)
                                    </button>
                                </h2>
                                <div id="collapseSAC" class="accordion-collapse collapse show" aria-labelledby="headingSAC" data-bs-parent="#accordionSistemas">
                                    <div class="accordion-body">
                                        <p>No <strong>Sistema de Amortização Constante (SAC)</strong>, o valor da amortização é fixo durante todo o financiamento, enquanto os juros são decrescentes, resultando em prestações decrescentes ao longo do tempo.</p>
                                        <p><strong>Características principais:</strong></p>
                                        <ul>
                                            <li>Amortização constante</li>
                                            <li>Juros decrescentes</li>
                                            <li>Prestações decrescentes</li>
                                            <li>Maior impacto inicial no orçamento</li>
                                            <li>Menor valor total de juros pagos</li>
                                        </ul>
                                        <p><strong>Recomendado para:</strong> Pessoas que podem arcar com parcelas maiores no início e desejam economizar no valor total de juros.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="headingPrice">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapsePrice" aria-expanded="false" aria-controls="collapsePrice">
                                        Tabela Price (Sistema Francês)
                                    </button>
                                </h2>
                                <div id="collapsePrice" class="accordion-collapse collapse" aria-labelledby="headingPrice" data-bs-parent="#accordionSistemas">
                                    <div class="accordion-body">
                                        <p>Na <strong>Tabela Price</strong>, também conhecida como Sistema Francês, as prestações são constantes durante todo o financiamento, com proporção variável entre juros e amortização.</p>
                                        <p><strong>Características principais:</strong></p>
                                        <ul>
                                            <li>Prestações constantes</li>
                                            <li>Amortização crescente</li>
                                            <li>Juros decrescentes</li>
                                            <li>Menor impacto inicial no orçamento</li>
                                            <li>Maior valor total de juros pagos</li>
                                        </ul>
                                        <p><strong>Recomendado para:</strong> Pessoas que preferem um valor fixo de parcela para melhor planejamento financeiro.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="headingSACRE">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSACRE" aria-expanded="false" aria-controls="collapseSACRE">
                                        Sistema de Amortização Crescente (SACRE)
                                    </button>
                                </h2>
                                <div id="collapseSACRE" class="accordion-collapse collapse" aria-labelledby="headingSACRE" data-bs-parent="#accordionSistemas">
                                    <div class="accordion-body">
                                        <p>O <strong>Sistema de Amortização Crescente (SACRE)</strong> é um meio-termo entre o SAC e a Tabela Price, onde a amortização cresce ao longo do tempo.</p>
                                        <p><strong>Características principais:</strong></p>
                                        <ul>
                                            <li>Amortização crescente</li>
                                            <li>Prestações mais estáveis que no SAC</li>
                                            <li>Juros decrescentes</li>
                                            <li>Impacto intermediário no orçamento inicial</li>
                                            <li>Valor total de juros intermediário entre SAC e Price</li>
                                        </ul>
                                        <p><strong>Recomendado para:</strong> Pessoas que buscam um equilíbrio entre o impacto inicial no orçamento e o valor total de juros pagos.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Entendi</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Rodapé -->
        <footer class="bg-light py-3 mt-5 rounded-top">
            <div class="container text-center">
                <p class="mb-0">Calculadora de Financiamento Imobiliário &copy; 2025</p>
                <p class="mb-0 small text-muted">Esta é uma ferramenta de simulação. Consulte uma instituição financeira para valores oficiais.</p>
            </div>
        </footer>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- jsPDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>
    <!-- Custom JS -->
    <script src="js/calculadora.js"></script>
    <script src="js/interface.js"></script>
    <script src="js/graficos.js"></script>
    <script src="js/cenarios.js"></script>
    <script src="js/ferramentas.js"></script>
    <script src="js/exportacao.js"></script>
</body>
</html>
