<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Análise Definitiva: Comprar vs Alugar Imóvel</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome para ícones -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <!-- jsPDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <!-- jsPDF-AutoTable -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.8.1/jspdf.plugin.autotable.min.js"></script>
    <!-- FileSaver.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>

    <!-- CSS personalizado -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Barra de Navegação Superior -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary sticky-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">
                <i class="fas fa-home me-2"></i>Análise Imobiliária
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarMain">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarMain">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link active" href="#" id="nav-home">
                            <i class="fas fa-house-user me-1"></i>Início
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" id="nav-new-simulation">
                            <i class="fas fa-calculator me-1"></i>Nova Simulação
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" id="nav-scenarios">
                            <i class="fas fa-layer-group me-1"></i>Meus Cenários
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" id="nav-studies">
                            <i class="fas fa-chart-line me-1"></i>Meus Estudos
                        </a>
                    </li>
                </ul>
                <div class="d-flex">
                    <button class="btn btn-outline-light" id="btn-help">
                        <i class="fas fa-question-circle me-1"></i>Ajuda
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- Painel Lateral -->
            <div class="col-md-3 col-lg-2 d-md-block bg-light sidebar collapse" id="sidebarMenu">
                <div class="position-sticky pt-3">
                    <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
                        <span>Acesso Rápido</span>
                    </h6>
                    <div class="accordion" id="sidebarAccordion">
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="headingRecent">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseRecent">
                                    Simulações Recentes
                                </button>
                            </h2>
                            <div id="collapseRecent" class="accordion-collapse collapse" data-bs-parent="#sidebarAccordion">
                                <div class="accordion-body p-0">
                                    <div class="list-group list-group-flush" id="recent-simulations">
                                        <a href="#" class="list-group-item list-group-item-action">
                                            <div class="d-flex w-100 justify-content-between">
                                                <h6 class="mb-1">Simulação Exemplo</h6>
                                                <small class="text-muted">Hoje</small>
                                            </div>
                                            <p class="mb-1">Financiamento - Apartamento Centro</p>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="headingScenarios">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseScenarios">
                                    Cenários Salvos
                                </button>
                            </h2>
                            <div id="collapseScenarios" class="accordion-collapse collapse" data-bs-parent="#sidebarAccordion">
                                <div class="accordion-body p-0">
                                    <div class="list-group list-group-flush" id="saved-scenarios">
                                        <a href="#" class="list-group-item list-group-item-action">
                                            <div class="d-flex w-100 justify-content-between">
                                                <h6 class="mb-1">Cenário Exemplo</h6>
                                                <small class="text-muted">Ontem</small>
                                            </div>
                                            <p class="mb-1">Comparação de Financiamentos</p>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="headingStudies">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseStudies">
                                    Estudos Salvos
                                </button>
                            </h2>
                            <div id="collapseStudies" class="accordion-collapse collapse" data-bs-parent="#sidebarAccordion">
                                <div class="accordion-body p-0">
                                    <div class="list-group list-group-flush" id="saved-studies">
                                        <a href="#" class="list-group-item list-group-item-action">
                                            <div class="d-flex w-100 justify-content-between">
                                                <h6 class="mb-1">Estudo Exemplo</h6>
                                                <small class="text-muted">Semana passada</small>
                                            </div>
                                            <p class="mb-1">Comprar vs Alugar - Zona Sul</p>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Área Principal -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <!-- Conteúdo dinâmico baseado na navegação -->
                <div id="content-container">
                    <!-- Página Inicial (visível por padrão) -->
                    <div id="home-content" class="content-section active">
                        <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                            <h1 class="h2">Análise Definitiva: Comprar vs Alugar Imóvel</h1>
                        </div>
                        
                        <div class="row mb-4">
                            <div class="col-md-8">
                                <div class="card">
                                    <div class="card-body">
                                        <h5 class="card-title">Bem-vindo à sua ferramenta de análise imobiliária</h5>
                                        <p class="card-text">
                                            Esta aplicação foi desenvolvida para auxiliar na tomada de decisão sobre a melhor forma de adquirir ou alugar um imóvel, 
                                            considerando diversos fatores econômicos e pessoais. Você pode criar simulações detalhadas, 
                                            compará-las em cenários e realizar estudos completos para encontrar a opção mais vantajosa para o seu caso.
                                        </p>
                                        <p class="card-text">
                                            Utilize as diferentes modalidades disponíveis para analisar todas as possibilidades:
                                            compra à vista, financiamento imobiliário, consórcio, aluguel ou outros tipos de empréstimos.
                                            A ferramenta também permite simular amortizações de dívidas existentes.
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card bg-light">
                                    <div class="card-body">
                                        <h5 class="card-title">Iniciar Nova Simulação</h5>
                                        <p class="card-text">Escolha uma modalidade para começar:</p>
                                        <div class="d-grid gap-2">
                                            <button class="btn btn-primary" data-simulation-type="cash">
                                                <i class="fas fa-money-bill-wave me-1"></i>Compra à Vista
                                            </button>
                                            <button class="btn btn-primary" data-simulation-type="financing">
                                                <i class="fas fa-landmark me-1"></i>Financiamento
                                            </button>
                                            <button class="btn btn-primary" data-simulation-type="consortium">
                                                <i class="fas fa-users me-1"></i>Consórcio
                                            </button>
                                            <button class="btn btn-primary" data-simulation-type="rent">
                                                <i class="fas fa-key me-1"></i>Aluguel
                                            </button>
                                            <button class="btn btn-primary" data-simulation-type="loan">
                                                <i class="fas fa-hand-holding-usd me-1"></i>Outros Empréstimos
                                            </button>
                                            <button class="btn btn-primary" data-simulation-type="amortization">
                                                <i class="fas fa-percentage me-1"></i>Amortização
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row mb-4">
                            <div class="col-md-6">
                                <div class="card">
                                    <div class="card-header">
                                        Dicas Úteis
                                    </div>
                                    <div class="card-body">
                                        <p class="card-text">
                                            Para uma análise mais precisa, considere fatores como inflação projetada, 
                                            valorização imobiliária e rentabilidade de investimentos alternativos. 
                                            Estes elementos são fundamentais para comparar adequadamente diferentes modalidades ao longo do tempo.
                                        </p>
                                        <p class="card-text">
                                            Lembre-se que o comprometimento máximo recomendado da renda familiar com financiamento 
                                            imobiliário é de 30%, conforme a legislação vigente.
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card">
                                    <div class="card-header">
                                        Simulações Recentes
                                    </div>
                                    <div class="card-body">
                                        <p class="card-text" id="no-simulations">
                                            Você ainda não possui simulações salvas. Crie sua primeira simulação 
                                            para começar a construir seu histórico de análises.
                                        </p>
                                        <div id="recent-simulations-home" class="d-none">
                                            <!-- Preenchido via JavaScript -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Nova Simulação -->
                    <div id="new-simulation-content" class="content-section">
                        <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                            <h1 class="h2">Nova Simulação</h1>
                        </div>
                        
                        <div class="row mb-4">
                            <div class="col-md-12">
                                <div class="card">
                                    <div class="card-header">
                                        <ul class="nav nav-tabs card-header-tabs" id="simulation-tabs">
                                            <li class="nav-item">
                                                <a class="nav-link active" id="cash-tab" data-bs-toggle="tab" href="#cash-form">Compra à Vista</a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="nav-link" id="financing-tab" data-bs-toggle="tab" href="#financing-form">Financiamento</a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="nav-link" id="consortium-tab" data-bs-toggle="tab" href="#consortium-form">Consórcio</a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="nav-link" id="rent-tab" data-bs-toggle="tab" href="#rent-form">Aluguel</a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="nav-link" id="loan-tab" data-bs-toggle="tab" href="#loan-form">Outros Empréstimos</a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="nav-link" id="amortization-tab" data-bs-toggle="tab" href="#amortization-form">Amortização</a>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="card-body">
                                        <div class="tab-content" id="simulation-tab-content">
                                            <!-- Formulário: Compra à Vista -->
                                            <div class="tab-pane fade show active" id="cash-form">
                                                <h5 class="card-title">Simulação de Compra à Vista</h5>
                                                <form id="cash-simulation-form">
                                                    <div class="row mb-3">
                                                        <div class="col-md-6">
                                                            <label for="cash-property-value" class="form-label">Valor do Imóvel (R$) *</label>
                                                            <input type="number" class="form-control" id="cash-property-value" required min="0" step="0.01">
                                                        </div>
                                                        <div class="col-md-6">
                                                            <label for="cash-acquisition-costs" class="form-label">Custos de Aquisição (R$) *</label>
                                                            <input type="number" class="form-control" id="cash-acquisition-costs" required min="0" step="0.01">
                                                            <div class="form-text">ITBI, escritura, registro, etc.</div>
                                                        </div>
                                                    </div>
                                                    <div class="row mb-3">
                                                        <div class="col-md-6">
                                                            <label for="cash-maintenance-costs" class="form-label">Custos de Manutenção Anual (R$) *</label>
                                                            <input type="number" class="form-control" id="cash-maintenance-costs" required min="0" step="0.01">
                                                            <div class="form-text">IPTU, condomínio, reformas, etc.</div>
                                                        </div>
                                                        <div class="col-md-6">
                                                            <label for="cash-alternative-return" class="form-label">Rentabilidade Alternativa (% a.a.)</label>
                                                            <input type="number" class="form-control" id="cash-alternative-return" min="0" max="100" step="0.01">
                                                            <div class="form-text">Rendimento de investimentos alternativos</div>
                                                        </div>
                                                    </div>
                                                    <div class="row mb-3">
                                                        <div class="col-md-4">
                                                            <label for="cash-inflation" class="form-label">Inflação Projetada (% a.a.)</label>
                                                            <input type="number" class="form-control" id="cash-inflation" min="0" max="100" step="0.01">
                                                        </div>
                                                        <div class="col-md-4">
                                                            <label for="cash-property-appreciation" class="form-label">Valorização Imobiliária (% a.a.)</label>
                                                            <input type="number" class="form-control" id="cash-property-appreciation" min="0" max="100" step="0.01">
                                                        </div>
                                                        <div class="col-md-4">
                                                            <label for="cash-time-horizon" class="form-label">Horizonte de Tempo (anos)</label>
                                                            <input type="number" class="form-control" id="cash-time-horizon" min="1" max="50" step="1">
                                                        </div>
                                                    </div>
                                                    <div class="row mb-3">
                                                        <div class="col-md-12">
                                                            <label for="cash-simulation-name" class="form-label">Nome da Simulação *</label>
                                                            <input type="text" class="form-control" id="cash-simulation-name" required>
                                                        </div>
                                                    </div>
                                                    <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                                                        <button type="button" class="btn btn-secondary me-md-2" id="cash-reset-btn">Limpar</button>
                                                        <button type="submit" class="btn btn-primary">Calcular</button>
                                                    </div>
                                                </form>
                                            </div>
                                            
                                            <!-- Formulário: Financiamento -->
                                            <div class="tab-pane fade" id="financing-form">
                                                <h5 class="card-title">Simulação de Financiamento Imobiliário</h5>
                                                <form id="financing-simulation-form">
                                                    <div class="row mb-3">
                                                        <div class="col-md-4">
                                                            <label for="financing-property-value" class="form-label">Valor do Imóvel (R$) *</label>
                                                            <input type="number" class="form-control" id="financing-property-value" required min="0" step="0.01">
                                                        </div>
                                                        <div class="col-md-4">
                                                            <label for="financing-down-payment" class="form-label">Valor da Entrada (R$) *</label>
                                                            <input type="number" class="form-control" id="financing-down-payment" required min="0" step="0.01">
                                                        </div>
                                                        <div class="col-md-4">
                                                            <label for="financing-term" class="form-label">Prazo (anos) *</label>
                                                            <input type="number" class="form-control" id="financing-term" required min="1" max="35" step="1">
                                                        </div>
                                                    </div>
                                                    <div class="row mb-3">
                                                        <div class="col-md-4">
                                                            <label for="financing-interest-rate" class="form-label">Taxa de Juros (% a.a.) *</label>
                                                            <input type="number" class="form-control" id="financing-interest-rate" required min="0" max="100" step="0.01">
                                                        </div>
                                                        <div class="col-md-4">
                                                            <label for="financing-amortization-system" class="form-label">Sistema de Amortização *</label>
                                                            <select class="form-select" id="financing-amortization-system" required>
                                                                <option value="price">Price (parcelas fixas)</option>
                                                                <option value="sac">SAC (amortização constante)</option>
                                                                <option value="sacre">SACRE (amortização crescente)</option>
                                                                <option value="mejs">MEJS (juros simples)</option>
                                                            </select>
                                                        </div>
                                                        <div class="col-md-4">
                                                            <label for="financing-monthly-income" class="form-label">Renda Familiar Mensal (R$) *</label>
                                                            <input type="number" class="form-control" id="financing-monthly-income" required min="0" step="0.01">
                                                        </div>
                                                    </div>
                                                    <div class="row mb-3">
                                                        <div class="col-md-4">
                                                            <label for="financing-contract-costs" class="form-label">Custos de Contratação (R$)</label>
                                                            <input type="number" class="form-control" id="financing-contract-costs" min="0" step="0.01">
                                                            <div class="form-text">Avaliação, seguros, taxas, etc.</div>
                                                        </div>
                                                        <div class="col-md-4">
                                                            <label for="financing-itbi-costs" class="form-label">ITBI e Custos Cartoriais (R$)</label>
                                                            <input type="number" class="form-control" id="financing-itbi-costs" min="0" step="0.01">
                                                        </div>
                                                        <div class="col-md-4">
                                                            <label for="financing-fgts-use" class="form-label">Uso do FGTS</label>
                                                            <div class="input-group">
                                                                <div class="input-group-text">
                                                                    <input class="form-check-input mt-0" type="checkbox" id="financing-fgts-checkbox">
                                                                </div>
                                                                <input type="number" class="form-control" id="financing-fgts-value" min="0" step="0.01" placeholder="Valor disponível (R$)" disabled>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row mb-3">
                                                        <div class="col-md-4">
                                                            <label for="financing-correction-index" class="form-label">Indexador de Correção</label>
                                                            <select class="form-select" id="financing-correction-index">
                                                                <option value="tr">TR</option>
                                                                <option value="ipca">IPCA</option>
                                                                <option value="none">Sem correção</option>
                                                            </select>
                                                        </div>
                                                        <div class="col-md-4">
                                                            <label for="financing-inflation" class="form-label">Inflação Projetada (% a.a.)</label>
                                                            <input type="number" class="form-control" id="financing-inflation" min="0" max="100" step="0.01">
                                                        </div>
                                                        <div class="col-md-4">
                                                            <label for="financing-property-appreciation" class="form-label">Valorização Imobiliária (% a.a.)</label>
                                                            <input type="number" class="form-control" id="financing-property-appreciation" min="0" max="100" step="0.01">
                                                        </div>
                                                    </div>
                                                    <div class="row mb-3">
                                                        <div class="col-md-12">
                                                            <label for="financing-simulation-name" class="form-label">Nome da Simulação *</label>
                                                            <input type="text" class="form-control" id="financing-simulation-name" required>
                                                        </div>
                                                    </div>
                                                    <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                                                        <button type="button" class="btn btn-secondary me-md-2" id="financing-reset-btn">Limpar</button>
                                                        <button type="submit" class="btn btn-primary">Calcular</button>
                                                    </div>
                                                </form>
                                            </div>
                                            
                                            <!-- Formulário: Consórcio -->
                                            <div class="tab-pane fade" id="consortium-form">
                                                <h5 class="card-title">Simulação de Consórcio Imobiliário</h5>
                                                <form id="consortium-simulation-form">
                                                    <div class="row mb-3">
                                                        <div class="col-md-6">
                                                            <label for="consortium-credit-value" class="form-label">Valor da Carta de Crédito (R$) *</label>
                                                            <input type="number" class="form-control" id="consortium-credit-value" required min="0" step="0.01">
                                                        </div>
                                                        <div class="col-md-6">
                                                            <label for="consortium-term" class="form-label">Prazo (meses) *</label>
                                                            <input type="number" class="form-control" id="consortium-term" required min="1" max="240" step="1">
                                                        </div>
                                                    </div>
                                                    <div class="row mb-3">
                                                        <div class="col-md-6">
                                                            <label for="consortium-admin-fee" class="form-label">Taxa de Administração (%) *</label>
                                                            <input type="number" class="form-control" id="consortium-admin-fee" required min="0" max="100" step="0.01">
                                                        </div>
                                                        <div class="col-md-6">
                                                            <label for="consortium-reserve-fund" class="form-label">Fundo de Reserva (%) *</label>
                                                            <input type="number" class="form-control" id="consortium-reserve-fund" required min="0" max="100" step="0.01">
                                                        </div>
                                                    </div>
                                                    <div class="row mb-3">
                                                        <div class="col-md-4">
                                                            <label for="consortium-insurance" class="form-label">Seguros (%)</label>
                                                            <input type="number" class="form-control" id="consortium-insurance" min="0" max="100" step="0.01">
                                                        </div>
                                                        <div class="col-md-4">
                                                            <label for="consortium-bid-value" class="form-label">Valor do Lance (%)</label>
                                                            <input type="number" class="form-control" id="consortium-bid-value" min="0" max="100" step="0.01">
                                                            <div class="form-text">Percentual do valor da carta</div>
                                                        </div>
                                                        <div class="col-md-4">
                                                            <label for="consortium-bid-payment" class="form-label">Forma de Pagamento do Lance</label>
                                                            <select class="form-select" id="consortium-bid-payment">
                                                                <option value="own">Recursos Próprios</option>
                                                                <option value="fgts">FGTS</option>
                                                                <option value="none">Não se aplica</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="row mb-3">
                                                        <div class="col-md-4">
                                                            <label for="consortium-inflation" class="form-label">Inflação Projetada (% a.a.)</label>
                                                            <input type="number" class="form-control" id="consortium-inflation" min="0" max="100" step="0.01">
                                                        </div>
                                                        <div class="col-md-4">
                                                            <label for="consortium-property-appreciation" class="form-label">Valorização Imobiliária (% a.a.)</label>
                                                            <input type="number" class="form-control" id="consortium-property-appreciation" min="0" max="100" step="0.01">
                                                        </div>
                                                        <div class="col-md-4">
                                                            <label for="consortium-alternative-return" class="form-label">Rentabilidade Alternativa (% a.a.)</label>
                                                            <input type="number" class="form-control" id="consortium-alternative-return" min="0" max="100" step="0.01">
                                                        </div>
                                                    </div>
                                                    <div class="row mb-3">
                                                        <div class="col-md-12">
                                                            <label for="consortium-simulation-name" class="form-label">Nome da Simulação *</label>
                                                            <input type="text" class="form-control" id="consortium-simulation-name" required>
                                                        </div>
                                                    </div>
                                                    <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                                                        <button type="button" class="btn btn-secondary me-md-2" id="consortium-reset-btn">Limpar</button>
                                                        <button type="submit" class="btn btn-primary">Calcular</button>
                                                    </div>
                                                </form>
                                            </div>
                                            
                                            <!-- Formulário: Aluguel -->
                                            <div class="tab-pane fade" id="rent-form">
                                                <h5 class="card-title">Simulação de Aluguel</h5>
                                                <form id="rent-simulation-form">
                                                    <div class="row mb-3">
                                                        <div class="col-md-6">
                                                            <label for="rent-monthly-value" class="form-label">Valor do Aluguel Mensal (R$) *</label>
                                                            <input type="number" class="form-control" id="rent-monthly-value" required min="0" step="0.01">
                                                        </div>
                                                        <div class="col-md-6">
                                                            <label for="rent-annual-adjustment" class="form-label">Reajuste Anual (%) *</label>
                                                            <input type="number" class="form-control" id="rent-annual-adjustment" required min="0" max="100" step="0.01">
                                                            <div class="form-text">Geralmente IGP-M</div>
                                                        </div>
                                                    </div>
                                                    <div class="row mb-3">
                                                        <div class="col-md-4">
                                                            <label for="rent-time-horizon" class="form-label">Horizonte de Tempo (anos) *</label>
                                                            <input type="number" class="form-control" id="rent-time-horizon" required min="1" max="50" step="1">
                                                        </div>
                                                        <div class="col-md-4">
                                                            <label for="rent-deposit" class="form-label">Depósito Caução (R$)</label>
                                                            <input type="number" class="form-control" id="rent-deposit" min="0" step="0.01">
                                                        </div>
                                                        <div class="col-md-4">
                                                            <label for="rent-insurance" class="form-label">Seguro Fiança (R$)</label>
                                                            <input type="number" class="form-control" id="rent-insurance" min="0" step="0.01">
                                                        </div>
                                                    </div>
                                                    <div class="row mb-3">
                                                        <div class="col-md-4">
                                                            <label for="rent-admin-fee" class="form-label">Taxa de Administração (%)</label>
                                                            <input type="number" class="form-control" id="rent-admin-fee" min="0" max="100" step="0.01">
                                                        </div>
                                                        <div class="col-md-4">
                                                            <label for="rent-property-tax" class="form-label">IPTU Anual (R$)</label>
                                                            <input type="number" class="form-control" id="rent-property-tax" min="0" step="0.01">
                                                        </div>
                                                        <div class="col-md-4">
                                                            <label for="rent-condo-fee" class="form-label">Condomínio Mensal (R$)</label>
                                                            <input type="number" class="form-control" id="rent-condo-fee" min="0" step="0.01">
                                                        </div>
                                                    </div>
                                                    <div class="row mb-3">
                                                        <div class="col-md-4">
                                                            <label for="rent-investment-value" class="form-label">Valor Disponível para Investimento (R$)</label>
                                                            <input type="number" class="form-control" id="rent-investment-value" min="0" step="0.01">
                                                        </div>
                                                        <div class="col-md-4">
                                                            <label for="rent-investment-return" class="form-label">Rentabilidade do Investimento (% a.a.)</label>
                                                            <input type="number" class="form-control" id="rent-investment-return" min="0" max="100" step="0.01">
                                                        </div>
                                                        <div class="col-md-4">
                                                            <label for="rent-inflation" class="form-label">Inflação Projetada (% a.a.)</label>
                                                            <input type="number" class="form-control" id="rent-inflation" min="0" max="100" step="0.01">
                                                        </div>
                                                    </div>
                                                    <div class="row mb-3">
                                                        <div class="col-md-12">
                                                            <label for="rent-simulation-name" class="form-label">Nome da Simulação *</label>
                                                            <input type="text" class="form-control" id="rent-simulation-name" required>
                                                        </div>
                                                    </div>
                                                    <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                                                        <button type="button" class="btn btn-secondary me-md-2" id="rent-reset-btn">Limpar</button>
                                                        <button type="submit" class="btn btn-primary">Calcular</button>
                                                    </div>
                                                </form>
                                            </div>
                                            
                                            <!-- Formulário: Outros Empréstimos -->
                                            <div class="tab-pane fade" id="loan-form">
                                                <h5 class="card-title">Simulação de Outros Tipos de Empréstimos</h5>
                                                <form id="loan-simulation-form">
                                                    <div class="row mb-3">
                                                        <div class="col-md-4">
                                                            <label for="loan-value" class="form-label">Valor do Empréstimo (R$) *</label>
                                                            <input type="number" class="form-control" id="loan-value" required min="0" step="0.01">
                                                        </div>
                                                        <div class="col-md-4">
                                                            <label for="loan-interest-rate" class="form-label">Taxa de Juros (% a.a.) *</label>
                                                            <input type="number" class="form-control" id="loan-interest-rate" required min="0" max="100" step="0.01">
                                                        </div>
                                                        <div class="col-md-4">
                                                            <label for="loan-term" class="form-label">Prazo (meses) *</label>
                                                            <input type="number" class="form-control" id="loan-term" required min="1" max="360" step="1">
                                                        </div>
                                                    </div>
                                                    <div class="row mb-3">
                                                        <div class="col-md-4">
                                                            <label for="loan-amortization-system" class="form-label">Sistema de Amortização *</label>
                                                            <select class="form-select" id="loan-amortization-system" required>
                                                                <option value="price">Price (parcelas fixas)</option>
                                                                <option value="sac">SAC (amortização constante)</option>
                                                            </select>
                                                        </div>
                                                        <div class="col-md-4">
                                                            <label for="loan-guarantees" class="form-label">Garantias Exigidas</label>
                                                            <select class="form-select" id="loan-guarantees">
                                                                <option value="none">Sem garantia</option>
                                                                <option value="property">Imóvel</option>
                                                                <option value="vehicle">Veículo</option>
                                                                <option value="other">Outra garantia</option>
                                                            </select>
                                                        </div>
                                                        <div class="col-md-4">
                                                            <label for="loan-contract-costs" class="form-label">Custos de Contratação (R$)</label>
                                                            <input type="number" class="form-control" id="loan-contract-costs" min="0" step="0.01">
                                                        </div>
                                                    </div>
                                                    <div class="row mb-3">
                                                        <div class="col-md-4">
                                                            <label for="loan-insurance" class="form-label">Seguros Obrigatórios (R$)</label>
                                                            <input type="number" class="form-control" id="loan-insurance" min="0" step="0.01">
                                                        </div>
                                                        <div class="col-md-4">
                                                            <label for="loan-portability" class="form-label">Possibilidade de Portabilidade</label>
                                                            <select class="form-select" id="loan-portability">
                                                                <option value="yes">Sim</option>
                                                                <option value="no">Não</option>
                                                            </select>
                                                        </div>
                                                        <div class="col-md-4">
                                                            <label for="loan-inflation" class="form-label">Inflação Projetada (% a.a.)</label>
                                                            <input type="number" class="form-control" id="loan-inflation" min="0" max="100" step="0.01">
                                                        </div>
                                                    </div>
                                                    <div class="row mb-3">
                                                        <div class="col-md-12">
                                                            <label for="loan-simulation-name" class="form-label">Nome da Simulação *</label>
                                                            <input type="text" class="form-control" id="loan-simulation-name" required>
                                                        </div>
                                                    </div>
                                                    <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                                                        <button type="button" class="btn btn-secondary me-md-2" id="loan-reset-btn">Limpar</button>
                                                        <button type="submit" class="btn btn-primary">Calcular</button>
                                                    </div>
                                                </form>
                                            </div>
                                            
                                            <!-- Formulário: Amortização -->
                                            <div class="tab-pane fade" id="amortization-form">
                                                <h5 class="card-title">Simulação de Amortização de Dívidas</h5>
                                                <form id="amortization-simulation-form">
                                                    <div class="row mb-3">
                                                        <div class="col-md-4">
                                                            <label for="amortization-current-balance" class="form-label">Saldo Devedor Atual (R$) *</label>
                                                            <input type="number" class="form-control" id="amortization-current-balance" required min="0" step="0.01">
                                                        </div>
                                                        <div class="col-md-4">
                                                            <label for="amortization-value" class="form-label">Valor Disponível para Amortização (R$) *</label>
                                                            <input type="number" class="form-control" id="amortization-value" required min="0" step="0.01">
                                                        </div>
                                                        <div class="col-md-4">
                                                            <label for="amortization-system" class="form-label">Sistema de Amortização do Contrato *</label>
                                                            <select class="form-select" id="amortization-system" required>
                                                                <option value="price">Price (parcelas fixas)</option>
                                                                <option value="sac">SAC (amortização constante)</option>
                                                                <option value="sacre">SACRE (amortização crescente)</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="row mb-3">
                                                        <div class="col-md-4">
                                                            <label for="amortization-interest-rate" class="form-label">Taxa de Juros do Contrato (% a.a.) *</label>
                                                            <input type="number" class="form-control" id="amortization-interest-rate" required min="0" max="100" step="0.01">
                                                        </div>
                                                        <div class="col-md-4">
                                                            <label for="amortization-remaining-term" class="form-label">Prazo Restante (meses) *</label>
                                                            <input type="number" class="form-control" id="amortization-remaining-term" required min="1" max="420" step="1">
                                                        </div>
                                                        <div class="col-md-4">
                                                            <label for="amortization-current-installment" class="form-label">Parcela Atual (R$) *</label>
                                                            <input type="number" class="form-control" id="amortization-current-installment" required min="0" step="0.01">
                                                        </div>
                                                    </div>
                                                    <div class="row mb-3">
                                                        <div class="col-md-12">
                                                            <label class="form-label">Opção de Amortização *</label>
                                                            <div class="form-check">
                                                                <input class="form-check-input" type="radio" name="amortization-option" id="amortization-option-term" value="term" checked>
                                                                <label class="form-check-label" for="amortization-option-term">
                                                                    Redução do prazo (mantendo parcela)
                                                                </label>
                                                            </div>
                                                            <div class="form-check">
                                                                <input class="form-check-input" type="radio" name="amortization-option" id="amortization-option-installment" value="installment">
                                                                <label class="form-check-label" for="amortization-option-installment">
                                                                    Redução da parcela (mantendo prazo)
                                                                </label>
                                                            </div>
                                                            <div class="form-check">
                                                                <input class="form-check-input" type="radio" name="amortization-option" id="amortization-option-custom" value="custom">
                                                                <label class="form-check-label" for="amortization-option-custom">
                                                                    Combinação personalizada
                                                                </label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row mb-3">
                                                        <div class="col-md-12">
                                                            <label for="amortization-simulation-name" class="form-label">Nome da Simulação *</label>
                                                            <input type="text" class="form-control" id="amortization-simulation-name" required>
                                                        </div>
                                                    </div>
                                                    <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                                                        <button type="button" class="btn btn-secondary me-md-2" id="amortization-reset-btn">Limpar</button>
                                                        <button type="submit" class="btn btn-primary">Calcular</button>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Área de Resultados (inicialmente oculta) -->
                        <div class="row mb-4 d-none" id="simulation-results">
                            <div class="col-md-12">
                                <div class="card">
                                    <div class="card-header d-flex justify-content-between align-items-center">
                                        <h5 class="mb-0">Resultados da Simulação</h5>
                                        <div>
                                            <button class="btn btn-sm btn-outline-primary me-2" id="save-simulation-btn">
                                                <i class="fas fa-save me-1"></i>Salvar
                                            </button>
                                            <button class="btn btn-sm btn-outline-secondary" id="export-simulation-btn">
                                                <i class="fas fa-file-export me-1"></i>Exportar
                                            </button>
                                        </div>
                                    </div>
                                    <div class="card-body">
                                        <ul class="nav nav-tabs" id="results-tabs">
                                            <li class="nav-item">
                                                <a class="nav-link active" id="summary-tab" data-bs-toggle="tab" href="#summary">Resumo</a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="nav-link" id="evolution-tab" data-bs-toggle="tab" href="#evolution">Evolução</a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="nav-link" id="charts-tab" data-bs-toggle="tab" href="#charts">Gráficos</a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="nav-link" id="sensitivity-tab" data-bs-toggle="tab" href="#sensitivity">Sensibilidade</a>
                                            </li>
                                        </ul>
                                        <div class="tab-content mt-3" id="results-tab-content">
                                            <!-- Resumo -->
                                            <div class="tab-pane fade show active" id="summary">
                                                <div id="summary-content">
                                                    <!-- Preenchido via JavaScript -->
                                                </div>
                                            </div>
                                            
                                            <!-- Evolução -->
                                            <div class="tab-pane fade" id="evolution">
                                                <div class="table-responsive">
                                                    <table class="table table-striped table-hover" id="evolution-table">
                                                        <!-- Preenchido via JavaScript -->
                                                    </table>
                                                </div>
                                            </div>
                                            
                                            <!-- Gráficos -->
                                            <div class="tab-pane fade" id="charts">
                                                <div class="row">
                                                    <div class="col-md-6 mb-4">
                                                        <div class="card h-100">
                                                            <div class="card-body">
                                                                <h6 class="card-title">Evolução do Saldo Devedor</h6>
                                                                <canvas id="balance-chart"></canvas>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6 mb-4">
                                                        <div class="card h-100">
                                                            <div class="card-body">
                                                                <h6 class="card-title">Composição das Parcelas</h6>
                                                                <canvas id="installment-chart"></canvas>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6 mb-4">
                                                        <div class="card h-100">
                                                            <div class="card-body">
                                                                <h6 class="card-title">Evolução Patrimonial</h6>
                                                                <canvas id="equity-chart"></canvas>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6 mb-4">
                                                        <div class="card h-100">
                                                            <div class="card-body">
                                                                <h6 class="card-title">Custo Total vs. Tempo</h6>
                                                                <canvas id="cost-chart"></canvas>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <!-- Sensibilidade -->
                                            <div class="tab-pane fade" id="sensitivity">
                                                <div class="row mb-3">
                                                    <div class="col-md-12">
                                                        <div class="card">
                                                            <div class="card-body">
                                                                <h6 class="card-title">Análise de Sensibilidade</h6>
                                                                <p class="card-text">
                                                                    Esta análise mostra como os resultados da simulação variam de acordo com mudanças em parâmetros-chave.
                                                                </p>
                                                                <div class="table-responsive">
                                                                    <table class="table table-striped table-hover" id="sensitivity-table">
                                                                        <!-- Preenchido via JavaScript -->
                                                                    </table>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <div class="card">
                                                            <div class="card-body">
                                                                <h6 class="card-title">Gráfico de Sensibilidade</h6>
                                                                <canvas id="sensitivity-chart"></canvas>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Meus Cenários -->
                    <div id="scenarios-content" class="content-section">
                        <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                            <h1 class="h2">Meus Cenários</h1>
                            <button class="btn btn-primary" id="new-scenario-btn">
                                <i class="fas fa-plus me-1"></i>Novo Cenário
                            </button>
                        </div>
                        
                        <div class="row mb-4">
                            <div class="col-md-12">
                                <div class="card">
                                    <div class="card-body">
                                        <div id="no-scenarios" class="text-center py-5">
                                            <i class="fas fa-layer-group fa-4x mb-3 text-muted"></i>
                                            <h5>Nenhum cenário encontrado</h5>
                                            <p class="text-muted">Crie um novo cenário para agrupar e comparar suas simulações.</p>
                                            <button class="btn btn-primary" id="create-first-scenario-btn">
                                                <i class="fas fa-plus me-1"></i>Criar Primeiro Cenário
                                            </button>
                                        </div>
                                        <div id="scenarios-list" class="d-none">
                                            <!-- Preenchido via JavaScript -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Detalhes do Cenário (inicialmente oculto) -->
                        <div class="row mb-4 d-none" id="scenario-details">
                            <div class="col-md-12">
                                <div class="card">
                                    <div class="card-header d-flex justify-content-between align-items-center">
                                        <h5 class="mb-0" id="scenario-title">Detalhes do Cenário</h5>
                                        <div>
                                            <button class="btn btn-sm btn-outline-primary me-2" id="add-to-study-btn">
                                                <i class="fas fa-chart-line me-1"></i>Adicionar a Estudo
                                            </button>
                                            <button class="btn btn-sm btn-outline-secondary me-2" id="edit-scenario-btn">
                                                <i class="fas fa-edit me-1"></i>Editar
                                            </button>
                                            <button class="btn btn-sm btn-outline-danger" id="delete-scenario-btn">
                                                <i class="fas fa-trash-alt me-1"></i>Excluir
                                            </button>
                                        </div>
                                    </div>
                                    <div class="card-body">
                                        <div class="row mb-3">
                                            <div class="col-md-12">
                                                <h6>Descrição</h6>
                                                <p id="scenario-description">Descrição do cenário</p>
                                            </div>
                                        </div>
                                        <div class="row mb-3">
                                            <div class="col-md-12">
                                                <h6>Simulações Incluídas</h6>
                                                <div class="table-responsive">
                                                    <table class="table table-striped table-hover" id="scenario-simulations-table">
                                                        <!-- Preenchido via JavaScript -->
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <h6>Análise Comparativa</h6>
                                                <div id="scenario-analysis">
                                                    <!-- Preenchido via JavaScript -->
                                                </div>
                                                <div class="text-center mt-3">
                                                    <button class="btn btn-primary" id="generate-scenario-analysis-btn">
                                                        <i class="fas fa-sync me-1"></i>Gerar Análise
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Meus Estudos -->
                    <div id="studies-content" class="content-section">
                        <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                            <h1 class="h2">Meus Estudos</h1>
                            <button class="btn btn-primary" id="new-study-btn">
                                <i class="fas fa-plus me-1"></i>Novo Estudo
                            </button>
                        </div>
                        
                        <div class="row mb-4">
                            <div class="col-md-12">
                                <div class="card">
                                    <div class="card-body">
                                        <div id="no-studies" class="text-center py-5">
                                            <i class="fas fa-chart-line fa-4x mb-3 text-muted"></i>
                                            <h5>Nenhum estudo encontrado</h5>
                                            <p class="text-muted">Crie um novo estudo para comparar diferentes cenários e modalidades.</p>
                                            <button class="btn btn-primary" id="create-first-study-btn">
                                                <i class="fas fa-plus me-1"></i>Criar Primeiro Estudo
                                            </button>
                                        </div>
                                        <div id="studies-list" class="d-none">
                                            <!-- Preenchido via JavaScript -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Detalhes do Estudo (inicialmente oculto) -->
                        <div class="row mb-4 d-none" id="study-details">
                            <div class="col-md-12">
                                <div class="card">
                                    <div class="card-header d-flex justify-content-between align-items-center">
                                        <h5 class="mb-0" id="study-title">Detalhes do Estudo</h5>
                                        <div>
                                            <button class="btn btn-sm btn-outline-primary me-2" id="export-study-btn">
                                                <i class="fas fa-file-export me-1"></i>Exportar
                                            </button>
                                            <button class="btn btn-sm btn-outline-secondary me-2" id="edit-study-btn">
                                                <i class="fas fa-edit me-1"></i>Editar
                                            </button>
                                            <button class="btn btn-sm btn-outline-danger" id="delete-study-btn">
                                                <i class="fas fa-trash-alt me-1"></i>Excluir
                                            </button>
                                        </div>
                                    </div>
                                    <div class="card-body">
                                        <div class="row mb-3">
                                            <div class="col-md-12">
                                                <h6>Descrição</h6>
                                                <p id="study-description">Descrição do estudo</p>
                                            </div>
                                        </div>
                                        <div class="row mb-3">
                                            <div class="col-md-12">
                                                <h6>Cenários Incluídos</h6>
                                                <div class="table-responsive">
                                                    <table class="table table-striped table-hover" id="study-scenarios-table">
                                                        <!-- Preenchido via JavaScript -->
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <h6>Análise Comparativa</h6>
                                                <div id="study-analysis">
                                                    <!-- Preenchido via JavaScript -->
                                                </div>
                                                <div class="text-center mt-3">
                                                    <button class="btn btn-primary" id="generate-study-analysis-btn">
                                                        <i class="fas fa-sync me-1"></i>Gerar Análise
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Rodapé -->
    <footer class="footer mt-auto py-3 bg-light">
        <div class="container">
            <div class="row">
                <div class="col-md-4">
                    <h6>Análise Imobiliária</h6>
                    <p class="text-muted">Ferramenta definitiva para análise de compra vs. aluguel de imóveis.</p>
                </div>
                <div class="col-md-4">
                    <h6>Referências</h6>
                    <ul class="list-unstyled">
                        <li><a href="#" class="text-decoration-none">Banco Central do Brasil</a></li>
                        <li><a href="#" class="text-decoration-none">Caixa Econômica Federal</a></li>
                        <li><a href="#" class="text-decoration-none">ABAC</a></li>
                        <li><a href="#" class="text-decoration-none">ABECIP</a></li>
                    </ul>
                </div>
                <div class="col-md-4">
                    <h6>Contato</h6>
                    <p class="text-muted">
                        Para suporte ou dúvidas, entre em contato através do e-mail: 
                        <a href="mailto:suporte@analiseimobiliaria.com.br" class="text-decoration-none">suporte@analiseimobiliaria.com.br</a>
                    </p>
                </div>
            </div>
            <hr>
            <div class="row">
                <div class="col-md-12 text-center">
                    <p class="text-muted">&copy; 2025 Análise Imobiliária. Todos os direitos reservados.</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Modais -->
    <!-- Modal de Ajuda -->
    <div class="modal fade" id="helpModal" tabindex="-1" aria-labelledby="helpModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="helpModalLabel">Ajuda e Informações</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fechar"></button>
                </div>
                <div class="modal-body">
                    <h6>Como usar esta ferramenta</h6>
                    <p>
                        Esta aplicação permite criar simulações detalhadas para diferentes modalidades de aquisição ou aluguel de imóveis.
                        Você pode salvar suas simulações em cenários e comparar diferentes cenários em estudos abrangentes.
                    </p>
                    
                    <h6>Hierarquia de Dados</h6>
                    <p>
                        <strong>Simulação:</strong> Cálculo individual com parâmetros específicos para uma modalidade.<br>
                        <strong>Cenário:</strong> Conjunto de simulações de uma mesma modalidade para comparação.<br>
                        <strong>Estudo:</strong> Conjunto de cenários para comparação ampla entre diferentes modalidades.
                    </p>
                    
                    <h6>Modalidades Disponíveis</h6>
                    <ul>
                        <li><strong>Compra à Vista:</strong> Análise de compra com recursos próprios.</li>
                        <li><strong>Financiamento:</strong> Simulação de financiamento imobiliário com diferentes sistemas de amortização.</li>
                        <li><strong>Consórcio:</strong> Simulação de consórcio imobiliário.</li>
                        <li><strong>Aluguel:</strong> Análise de custos e benefícios do aluguel.</li>
                        <li><strong>Outros Empréstimos:</strong> Simulação de empréstimos alternativos para aquisição.</li>
                        <li><strong>Amortização:</strong> Análise de amortizações extraordinárias em dívidas existentes.</li>
                    </ul>
                    
                    <h6>Dicas para Análise Eficaz</h6>
                    <p>
                        Para uma análise mais precisa, considere fatores como inflação projetada, valorização imobiliária e 
                        rentabilidade de investimentos alternativos. Estes elementos são fundamentais para comparar adequadamente 
                        diferentes modalidades ao longo do tempo.
                    </p>
                    <p>
                        Lembre-se que o comprometimento máximo recomendado da renda familiar com financiamento imobiliário 
                        é de 30%, conforme a legislação vigente.
                    </p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Novo Cenário -->
    <div class="modal fade" id="newScenarioModal" tabindex="-1" aria-labelledby="newScenarioModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="newScenarioModalLabel">Novo Cenário</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fechar"></button>
                </div>
                <div class="modal-body">
                    <form id="new-scenario-form">
                        <div class="mb-3">
                            <label for="scenario-name" class="form-label">Nome do Cenário *</label>
                            <input type="text" class="form-control" id="scenario-name" required>
                        </div>
                        <div class="mb-3">
                            <label for="scenario-description-input" class="form-label">Descrição</label>
                            <textarea class="form-control" id="scenario-description-input" rows="3"></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="scenario-modality" class="form-label">Modalidade *</label>
                            <select class="form-select" id="scenario-modality" required>
                                <option value="cash">Compra à Vista</option>
                                <option value="financing">Financiamento</option>
                                <option value="consortium">Consórcio</option>
                                <option value="rent">Aluguel</option>
                                <option value="loan">Outros Empréstimos</option>
                                <option value="amortization">Amortização</option>
                            </select>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary" id="save-new-scenario-btn">Salvar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Novo Estudo -->
    <div class="modal fade" id="newStudyModal" tabindex="-1" aria-labelledby="newStudyModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="newStudyModalLabel">Novo Estudo</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fechar"></button>
                </div>
                <div class="modal-body">
                    <form id="new-study-form">
                        <div class="mb-3">
                            <label for="study-name" class="form-label">Nome do Estudo *</label>
                            <input type="text" class="form-control" id="study-name" required>
                        </div>
                        <div class="mb-3">
                            <label for="study-description-input" class="form-label">Descrição</label>
                            <textarea class="form-control" id="study-description-input" rows="3"></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="study-scenarios" class="form-label">Cenários Disponíveis</label>
                            <div id="study-scenarios-checkboxes">
                                <!-- Preenchido via JavaScript -->
                                <div class="text-center py-3 text-muted">
                                    <p>Nenhum cenário disponível. Crie cenários primeiro.</p>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary" id="save-new-study-btn">Salvar</button>
                </div>
            </div>
        </div>
    </div>    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Módulos JavaScript -->
    <script type="module" src="calculations.js"></script>
    <script type="module" src="storage.js"></script>
    <script type="module" src="charts.js"></script>
    <script type="module" src="export.js"></script>
    <script type="module" src="scripts.js"></script>
</body>
</html>
